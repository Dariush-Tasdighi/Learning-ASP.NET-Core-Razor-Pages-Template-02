@page
@model Server.Pages.Admin.RoleManager.IndexModel
@inject Infrastructure.Settings.ApplicationSettings applicationSettings

@{
	@if (Model.ViewModel == null)
	{
		return;
	}

	var pageTitle =
		Resources.PageTitles.RoleManagement;

	ViewData["PageTitle"] = pageTitle;

	if (System.Threading.Thread.CurrentThread.CurrentUICulture.TextInfo.IsRightToLeft)
	{
		Layout =
			"Layouts/Rtl/_Layout";
	}
	else
	{
		Layout =
			"Layouts/Ltr/_Layout";
	}
}

<div class="container my-0 my-sm-1 my-md-3 my-lg-5">

	<a asp-page="Create" class="btn btn-primary w-25 my-4" role="button" aria-pressed="true">
		<i class="bi bi-person-workspace"></i>
		@(string.Format(Resources.ButtonCaptions.CreateNew, Resources.DataDictionary.Role))
	</a>

	<div class="row">
		<div class="col table-responsive">
			<table class="@(applicationSettings.TablesDefaultSettings.TableStyle)">

				<caption>@(string.Format(Resources.DataDictionary.ListOfItems, Resources.DataDictionary.Roles))</caption>

				<thead class="@(applicationSettings.TablesDefaultSettings.TableHeaderStyle)">
					<tr>
						<th>
							#
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].Name)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].IsActive)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].IsSystemic)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].IsDeletable)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].IsDeleted)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].InsertDateTime)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.ViewModel.Data[0].UpdateDateTime)
						</th>
						<th>
							@(Resources.DataDictionary.Action)
						</th>
					</tr>
				</thead>

				<tbody>
					@for (int index = 0; index <= Model.ViewModel.Data.Count - 1; index++)
					{
						var item = Model.ViewModel.Data[index];

						<tr>
							<td>
								@((Model.ViewModel.PageInformation.PageNumber - 1) * Model.ViewModel.PageInformation.PageSize + (index + 1))
							</td>
							<td>
								@(item.Name)
							</td>
							<td>
								<i class="@(item.IsActive ? applicationSettings.TablesDefaultSettings.YesIcon : applicationSettings.TablesDefaultSettings.NoIcon)"></i>
							</td>

							<td>
								<i class="@(item.IsSystemic? applicationSettings.TablesDefaultSettings.YesIcon : applicationSettings.TablesDefaultSettings.NoIcon)"></i>
							</td>

							<td>
								<i class="@(item.IsDeletable ? applicationSettings.TablesDefaultSettings.YesIcon : applicationSettings.TablesDefaultSettings.NoIcon)"></i>
							</td>

							<td>
								<i class="@(item.IsDeleted ? applicationSettings.TablesDefaultSettings.YesIcon : applicationSettings.TablesDefaultSettings.NoIcon)"></i>
							</td>

							<td>
								@(item.InsertDateTime)
							</td>

							@if (item.UpdateDateTime.HasValue)
							{
								<td>
									@(item.UpdateDateTime)
								</td>
							}
							else
							{
								<td>
									<i class="bi bi-dash"></i>
								</td>
							}

							@if (item.IsDeleted == false)
							{
								<td>
									<a asp-page="./Update" asp-route-id="@(item.Id)" class="mx-1 text-danger text-decoration-none">
										<i class="bi bi-pencil-fill"></i>
									</a>
									|
									@if (item.IsDeletable)
									{
										<a asp-page="./Delete" asp-route-id="@(item.Id)" class="mx-1 text-danger text-decoration-none">
											<i class="bi bi-trash-fill"></i>
										</a>

										<text>|</text>
									}
									<a asp-page="./Details" asp-route-id="@(item.Id)" class="mx-1 text-danger text-decoration-none">
										<i class="bi bi-zoom-in"></i>
									</a>
								</td>
							}
							else
							{
								<td>
									<i class="bi bi-dash"></i>
								</td>
							}
						</tr>
					}
				</tbody>

				<tfoot class="@(applicationSettings.TablesDefaultSettings.TableFooterStyle)">
					<tr>
						<td colspan="9">
							<ul class="pagination">
								<li class="page-item @(Model.ViewModel.PageInformation.PageNumber <= 1 ? "disabled" : null )">
									<a class="page-link" asp-page="./Index"
									   asp-route-pageSize="@(Model.ViewModel.PageInformation.PageSize)"
									   asp-route-pageNumber=@(Model.ViewModel.PageInformation.PageNumber - 1)>
										<i class="@(applicationSettings.TablesDefaultSettings.PreviousPageIcon)"></i>
									</a>
								</li>

								<li class="page-item">
									<a class="page-link" asp-page="./Index"
									   asp-route-PageNumber=@(Model.ViewModel.PageInformation.PageNumber)
									   asp-route-PageSize="@(Model.ViewModel.PageInformation.PageSize)">
										@(Model.ViewModel.PageInformation.PageNumber)
									</a>
								</li>

								<li class="page-item @(Model.ViewModel.PageInformation.PageNumber >= Model.ViewModel.PageInformation.PageCount ? "disabled" : null )">
									<a class="page-link" asp-page="./Index"
									   asp-route-PageNumber=@(Model.ViewModel.PageInformation.PageNumber + 1)
									   asp-route-PageSize="@(Model.ViewModel.PageInformation.PageSize)">
										<i class="@(applicationSettings.TablesDefaultSettings.NextPageIcon)"></i>
									</a>
								</li>
							</ul>
						</td>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
</div>
